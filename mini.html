<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="color-scheme" content="dark" />
    <title>CB Payment Mini App</title>
    <link rel="stylesheet" href="/mini.css?v=20260226-csp-fix-v1" />
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="/mini.js?v=20260221-required-contract-v1" defer></script>
  </head>
  <body>
    <main class="shell">
      <h1 class="title">New Client</h1>
      <p class="subtitle">Submissions go to moderation queue.</p>

      <form id="mini-client-form" novalidate>
        <section class="form-section" aria-labelledby="mini-section-basic">
          <h2 id="mini-section-basic" class="section-title">Basic Info</h2>

          <div class="field">
            <label for="clientName">Client Name *</label>
            <input id="clientName" name="clientName" required autocomplete="off" />
          </div>

          <div class="field">
            <label for="clientPhoneNumber">Phone</label>
            <input
              id="clientPhoneNumber"
              name="clientPhoneNumber"
              autocomplete="off"
              type="tel"
              inputmode="numeric"
              maxlength="15"
              placeholder="+1(555)123-4567"
            />
          </div>

          <div class="field">
            <label for="clientEmailAddress">Email</label>
            <input
              id="clientEmailAddress"
              name="clientEmailAddress"
              autocomplete="off"
              type="email"
              placeholder="client@example.com"
            />
          </div>

          <div class="field">
            <label for="companyName">Company *</label>
            <input id="companyName" name="companyName" required autocomplete="off" />
          </div>
        </section>

        <section class="form-section" aria-labelledby="mini-section-sales">
          <h2 id="mini-section-sales" class="section-title">Sales Info</h2>

          <div class="field">
            <label for="closedBy">Closed By *</label>
            <input id="closedBy" name="closedBy" required autocomplete="off" />
          </div>

          <div class="field">
            <label for="leadSource">Lead Source</label>
            <input id="leadSource" name="leadSource" autocomplete="off" />
          </div>

          <div class="field">
            <label for="serviceType">Service Type *</label>
            <input id="serviceType" name="serviceType" required autocomplete="off" />
          </div>
        </section>

        <section class="form-section" aria-labelledby="mini-section-contract">
          <h2 id="mini-section-contract" class="section-title">Contract</h2>

          <div class="field">
            <label for="contractTotals">Contract Totals *</label>
            <input id="contractTotals" name="contractTotals" required autocomplete="off" />
          </div>

          <div class="payment-group">
            <h3 class="payment-group__title">Payment 1</h3>

            <div class="payment-grid">
              <div class="field">
                <label for="payment1">Amount *</label>
                <input id="payment1" name="payment1" required autocomplete="off" />
              </div>

              <div class="field">
                <label for="payment1Date">Date *</label>
                <div class="date-input-shell">
                  <input id="payment1Date" name="payment1Date" type="text" placeholder="MM/DD/YYYY" required autocomplete="off" />
                  <button type="button" class="date-picker-trigger" data-date-target="payment1Date" aria-label="Pick date">
                    <svg viewBox="0 0 24 24" aria-hidden="true">
                      <path
                        d="M7 2a1 1 0 0 1 1 1v1h8V3a1 1 0 1 1 2 0v1h1a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3V7a3 3 0 0 1 3-3h1V3a1 1 0 0 1 1-1Zm13 8H4v9a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-9ZM5 6a1 1 0 0 0-1 1v1h16V7a1 1 0 0 0-1-1H5Z"
                      />
                    </svg>
                  </button>
                  <input type="date" class="date-picker-proxy" data-date-proxy-for="payment1Date" tabindex="-1" />
                </div>
              </div>
            </div>
          </div>

          <div class="field">
            <label for="futurePayment">Future Payment</label>
            <input id="futurePayment" name="futurePayment" autocomplete="off" />
          </div>

          <label class="toggle-card" for="afterResult">
            <div class="toggle-copy">
              <span class="toggle-title">After Result</span>
              <span class="toggle-hint">Track this client as "After Result".</span>
            </div>
            <span class="toggle-switch">
              <input id="afterResult" type="checkbox" name="afterResult" />
              <span class="toggle-slider"></span>
            </span>
          </label>
        </section>

        <section class="form-section" aria-labelledby="mini-section-extra">
          <h2 id="mini-section-extra" class="section-title">Extra</h2>

          <div class="field">
            <label for="ssn">SSN</label>
            <input
              id="ssn"
              name="ssn"
              type="password"
              autocomplete="off"
              inputmode="numeric"
              maxlength="11"
              placeholder="â€¢â€¢â€¢-â€¢â€¢-â€¢â€¢â€¢â€¢"
            />
          </div>

          <div class="field">
            <label for="identityIq">IdentityIQ</label>
            <input id="identityIq" name="identityIq" autocomplete="off" />
            <p class="field-help">IdentityIQ reference or status note (if applicable).</p>
          </div>

          <div class="field">
            <label for="notes">Notes</label>
            <textarea id="notes" name="notes" placeholder="Add extra context for moderation"></textarea>
          </div>

          <div class="attachments-card">
            <h3 class="attachments-card__title">ðŸ“Ž Attachments</h3>
            <p class="field-help">Upload up to 10 files</p>
            <input id="attachments" class="attachments-input-native" name="attachments" type="file" multiple />
            <button id="attachments-upload-button" class="attachments-upload-button" type="button">Upload files</button>
            <div id="attachments-preview" class="attachments-preview" hidden></div>
          </div>
        </section>

        <div class="submit-bar">
          <button type="submit" id="mini-submit-button">
            <span class="button-label">Add Client</span>
            <span class="button-spinner" aria-hidden="true"></span>
          </button>
        </div>
      </form>

      <p id="mini-message" class="message" role="status" aria-live="polite"></p>
    </main>
  </body>
</html>
